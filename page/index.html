<!doctype html>
<html>
<head>
<meta charset="utf-8">
<meta name="viewport" content="initial-scale=1.0,maximum-scale=1,user-scalable=no">
<title>家庭预存有礼，最高得4999元现金</title>
<link rel="stylesheet" href="../style/base.css">
<link rel="stylesheet" href="../style/1/style.css">
</head>
<body>
<div id="wrapper">
	<div id="topbar">
		<div class="logo"></div>
		<div class="links">
			<a class="btn rule dark"><em>活动规则</em></a>
			<a class="btn log"><em>我的奖品</em></a>
		</div>
	</div>
	<header id="header">
		<h1>家庭预存有礼，最高得4999元现金</h1>
		<div class="term_date">活动日期：1月1日~3月31日</div>
	</header>
	<div id="main">
		<div class="main dial light">
			<ul class="prize rotate">
				<li>
					<i class="gift gift_1"></i>
					<em>4999元</em>
				</li>
				<li>
					<i class="gift gift_2"></i>
					<em>流量小时包</em>
				</li>
				<li>
					<i class="gift gift_3"></i>
					<em>谢谢参与</em>		
				</li>
				<li>
					<i class="gift gift_1"></i>
					<em>1000元</em>
				</li>
				<li>
					<i class="gift gift_4"></i>
					<em>新春礼包</em>	
				</li>
				<li>
					<i class="gift gift_3"></i>
					<em>谢谢参与</em>	
				</li>
			</ul>
			<div class="pointer"></div>
		</div>
		<div class="times">您还剩余<b>1次</b>抽奖机会</div>
	</div>
	<footer id="footer"></footer>
</div>
<div class="pop mask win">
	<div class="radial"></div>
	<div class="box">
		<header class="header">
			<h3>中奖啦！</h3>
			<a class="btn close"><em>关闭</em></a>
		</header>
		<div class="body">
       		<i class="gift gift_4"></i>
        	<div class="msg">获得<b>新春礼包</b>一份</div>
        </div>
		<footer class="action">
        	<a class="btn dark"><em>我要领奖</em></a>
        </footer>
	</div>
</div>
<div class="pop mask confirm">
	<div class="box">
		<div class="body">
        	<div class="msg">您已经抽过奖，不能再抽奖了！</div>
        </div>
		<footer class="action">
        	<a class="btn dark close"><em>知道了</em></a>
        </footer>
	</div>
</div>
<div class="pop mask rule">
	<div class="box">
		<header>
			<h3>活动规则</h3>
			<button type="button" class="btn close">×</button>
		</header>
		<div class="body">
			<ul>
				<li>1、活动时间：2019年1月1日~2019年3月31日</li>
				<li>2、活动对象：进店新办理家庭网九江移动客户，且组网成员不少于3人</li>
				<li>3、抽奖次数：成功办理业务客户最多可抽奖1次</li>
				<li>4、奖品兑换：
                    <ul>
                    	<li>(1)4999元、1000元现金，需本人携带身份证，在办理家庭网业务的厅店，填写礼品领取登记表，本人手持身份证拍照，由营业员兑换现金。</li>
                        <li>(2)新春礼包、1G流量小时包，在办理家庭网业务的厅店，填写礼品领取登记表，由营业员现场赠送。</li>
						<li>注：1G流量小时包，需九江移动正常在网号码可领取，如欠费或非正常状态，无法领取。</li>
                    </ul>
				</li>
			</ul>
		</div>
	</div>
</div>
<div class="pop mask log">
	<div class="box">
		<header>
			<h3>中奖记录</h3>
			<button type="button" class="btn close">×</button>
		</header>
		<div class="body">
			<table class="com-table">
				<thead>
					<tr>
						<th>号码</th>
						<th>奖品</th>
						<th>中奖时间</th>
					</tr>
				</thead>
				<tbody>
					<tr>
						<td>13812341234</td>
						<td>新春礼包</td>
						<td>2019-01-01 15:12</td>
					</tr>
				</tbody>
			</table>
		</div>
	</div>
</div>
<script src="../js/jquery.min.js"></script>
<script src="../js/jQueryRotate.2.2.js"></script>
<script>
	//测试
	$(".pointer").on("click",function() {
		if($(this).hasClass("disabled")){
			$(".pop.confirm").addClass("open");
		}else{
			lottery();
		}
	});
	
	$(".pop .btn.close").on("click",function(){
		$(this).parents(".pop").removeClass("open");
	});
	$(".pop.win .btn.close").on("click",function(){
		//$(".dial>.prize").addClass("rotate");
	});
	$(".btn.rule").on("click",function(e){
		$(".pop.rule").slideDown(200);
		e.stopPropagation(); 
	});
	$(".btn.log").on("click",function(e){
		$(".pop.log").slideDown(200);
		e.stopPropagation(); 
	});
	$(".pop.rule .btn.close,.pop.log .btn.close").on("click",function(){
		$(".pop.rule,.pop.log").slideUp(200);
	});
	function lottery() {
		/*
			$.ajax({
			type : 'POST',
			url : 'AwardServlet',
			dataType : 'json',
			cache : false,
			error : function() {
				alert('出错了！');
				return false;
			},

			success : function(json) {
				$(".pointer").unbind('click').css("cursor", "default");
				var angle = parseInt(json.angle); //角度 
				var msg = json.msg; //提示信息
				*/
				$(".dial").addClass("running");
				$(".dial>.prize").removeClass("rotate");
				$(".dial>.prize").stopRotate();
				$(".dial>.prize").rotate({ 
					duration : 4000, //转动时间 
					angle : 0, //开始角度 
					animateTo : 3600 + 400, //test
					//easing : $.easing.easeOutSine, //动画扩展 
					callback : function() {
						$(".dial").removeClass("running");
						$(".pointer").addClass("disabled");
						$(".pop.win").addClass("open");
						var con = confirm(msg + '\n还要再来一次吗？');
						if (con) {
							lottery();
						} else {
							return false;
						}
					}
				});
			//}
		//});
	}
</script>
</body>
</html>
